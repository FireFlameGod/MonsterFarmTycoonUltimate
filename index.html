<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sziget Tycoon Pre-Alpha</title>
    <style>
        body {
            background-color: #2c3e50; /* S√∂t√©t tenger sz√≠n */
            color: white;
            font-family: sans-serif;
            text-align: center;
            overflow: hidden; /* Hogy ne lehessen g√∂rgetni */
            margin: 0;
        }
        #game-container {
            margin-top: 50px;
        }
        .btn {
            background: #e67e22;
            border: none;
            padding: 15px 30px;
            font-size: 20px;
            color: white;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 0 4px 0 #d35400;
        }
        .btn:active {
            box-shadow: none;
            transform: translateY(4px);
        }
        #player-count {
            color: #f1c40f;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <h1>üèùÔ∏è Sziget Tycoon Teszt</h1>
    <p>Jelenleg <span id="player-count">0</span> j√°t√©kos van itt.</p>
    
    <div id="game-container">
        <button class="btn" onclick="testConnection()">Klikk a teszthez!</button>
        <p id="status-msg">V√°rakoz√°s a Firebase-re...</p>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, set, onValue, update, increment } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        // --- IDE M√ÅSOLD BE A SAJ√ÅT FIREBASE CONFIGODAT! ---
        // (A const firebaseConfig = { ... } r√©szt)
        const firebaseConfig = {

                      apiKey: "AIzaSyA-MauYrQl5WZ4TPv53vNxuUFnW3dEG0Z8",
                    
                      authDomain: "monsterfarmtycoonultimate.firebaseapp.com",
                    
                      databaseURL: "https://monsterfarmtycoonultimate-default-rtdb.europe-west1.firebasedatabase.app",
                    
                      projectId: "monsterfarmtycoonultimate",
                    
                      storageBucket: "monsterfarmtycoonultimate.firebasestorage.app",
                    
                      messagingSenderId: "621935486358",
                    
                      appId: "1:621935486358:web:ac7d20b0beb3933f64e9b7"

        };

        // --------------------------------------------------

        // Inicializ√°l√°s
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // 1. Teszt: Kapcsolat ellen≈ërz√©se
        const connectedRef = ref(db, ".info/connected");
        onValue(connectedRef, (snap) => {
            if (snap.val() === true) {
                document.getElementById("status-msg").innerText = "‚úÖ Kapcsol√≥dva a szerverhez!";
                document.getElementById("status-msg").style.color = "#2ecc71";
            } else {
                document.getElementById("status-msg").innerText = "‚ùå Nincs kapcsolat...";
            }
        });

        // 2. Teszt: K√∂z√∂s sz√°ml√°l√≥
        // Ez figyeli, ha B√ÅRKI kattint a vil√°gon
        const counterRef = ref(db, 'teszt_adatok/kattintasok');
        onValue(counterRef, (snapshot) => {
            const data = snapshot.val() || 0;
            document.getElementById("player-count").innerText = data;
        });

        // Ezt a f√ºggv√©nyt tessz√ºk el√©rhet≈ëv√© a gombnak (glob√°lis t√©rbe)
        window.testConnection = function() {
            // N√∂velj√ºk a k√∂z√∂s sz√°ml√°l√≥t 1-gyel
            update(ref(db, 'teszt_adatok'), {
                kattintasok: increment(1)
            });
        };
    </script>
</body>
</html>
